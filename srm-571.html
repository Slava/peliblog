<!DOCTYPE html>
<html lang="en">

<head>
  <!-- <link rel="stylesheet/less" type="text/css" href="http://devblog.me/theme/css/style.less"> -->
  <!-- <script src="http://devblog.me/theme/js/less-1.5.0.min.js" type="text/javascript"></script> -->
  <link rel="stylesheet" type="text/css" href="http://devblog.me/theme/css/style.css">

  <link rel="stylesheet" type="text/css" href="http://devblog.me/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Slava Kim">
  <meta name="description" content="Posts and writings by Slava Kim">


    
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type= "text/javascript">
       MathJax.Hub.Config({
           config: ["MMLorHTML.js"],
           jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],
           TeX: { extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"], equationNumbers: { autoNumber: "AMS" } },
           extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],
           tex2jax: { 
               inlineMath: [ ['$','$'] ],
               displayMath: [ ['$$','$$'] ],
               processEscapes: true },
           "HTML-CSS": {
               styles: { ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
           }
       });
    </script>


<meta name="keywords" content="">

  <title>
SRM 571  </title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37747647-1', 'http://devblog.me');
  ga('send', 'pageview');

</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="http://devblog.me">
        <img src="http://devblog.me/theme/images/logo.png" alt="logo">
      </a>
      <h2><a href="http://devblog.me">Slava Kim</a></h2>
      <p>Learning to code since 2008</p>
      <ul>
        <li><a href="https://github.com/slava" target="_blank">My GitHub</a></li>
        <li><a href="https://twitter.com/imslavko" target="_blank">Me on Twitter</a></li>
        <li><a href="http://slv.io/" target="_blank">More about me</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
<p>Posted on Tue 19 February 2013</p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="http://devblog.me/srm-571.html">SRM 571</a></h1>
  </div>
  <div class="article_text">
    <p>This is 3rd SRM I participated in 2013. After failing SRM 568 and SRM 569 with really silly mistakes I decided to ascend my rating finally.</p>
<h3>250</h3>
<p>Looks very easy and it is. We are given $N$ strings of type "1.mp3", "2.mp3", etc. We need to sort them lexicographically and return top 50 strings. There are bunch of different correct solutions but idea is the same: if $N \le 50$ then we just compute every string and sort resulting array. Else we need to consider some big numbers close to power of ten.</p>
<p>It might sound funny but I managed to put bug in easiest solution. Then reubmitted it for 149 points instead of ~220 points. Regardless huge disappointement I was happy that could submit <em>something</em> working as last two rounds I failed even easy problems.</p>
<p>Challenge phase brought me another 50 points challenging guy with different bug.</p>
<h3>500</h3>
<p>This problem was about finding clique in a graph of up to $50$ vertices maximizing total weight of picked. Another constraint was: clique should include at least $\frac{2}{3}$ of total number of vertices.</p>
<p>First thing everybody probably noticed: looking for optimal clique is NP-hard problem, so exclude anything polynomial here.</p>
<p>Second is obvious constraint: $\frac{2}{3} \times n \le 16$. It means there is something to do with it. I could not come up with anything better than quite stupid backtracking approach with some sorting for better pruning. It looks like I am still bad in math and it worked slower than expected and failed on system test.</p>
<p>During Challenge phase my solution defended two challenges but it did not help in the end.</p>
<p>I saw several greedy solutions and one DP in my room: all failed. Approach is backtrack but from different end (you do not expect it to be that easy, right?). Someone found Bron-Kerbosch algorithm in <a href="http://en.wikipedia.org/wiki/Bron%E2%80%93Kerbosch_algorithm">wiki</a> but failed. Another approach was greedy solution combined with random shuffles (not first time I notice such randomizing crap work).</p>
<p>In the practice session I could implement correct solution in minutes which leads to well known conclusion: in TopCoder idea of the solution tends to be much harder and more important than implementation details. That is the reason we love it.</p>
<p>Solution: for given subset of vertices find any non-connected pair. If there is no such pair it means we found clique, return sum of subset as the best answer. Else there are two ways: try look at subset with out the first bad vertix or with out the second one. It looks exponential and it is but number of different branches do not exceed $2^{16}$ as we are not interested in small subsets.</p>
<h3>In the end</h3>
<p>I was one of majority with one solved problem and less than 200 points which brought me tiny amount of rating. It feel like it would take enormous amount of effort to come back to middle-yellowish position.</p>
<p>A lot of people from KZ participated today. Even guys from Palo Alto. Even from Kharkov. Keep it up, guys!</p>
<h3>Code</h3>
<p>250 - FoxAndMp3</p>
<div class="highlight"><pre><span class="n">string</span> <span class="nf">toStr</span><span class="p">(</span><span class="n">Int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">stringstream</span> <span class="n">strm</span><span class="p">;</span>
  <span class="n">strm</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;.mp3&quot;</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">strm</span><span class="p">.</span><span class="n">str</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">doit</span><span class="p">(</span><span class="n">Int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">min</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>

  <span class="n">res</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">toStr</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">doit</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="n">min</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">FoxAndMp3</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">playList</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">::</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">stringstream</span> <span class="n">strm</span><span class="p">;</span>
        <span class="n">strm</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;.mp3&quot;</span><span class="p">;</span>
        <span class="n">a</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">strm</span><span class="p">.</span><span class="n">str</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

      <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">doit</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>


<p>500 - MagicMolecule</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="n">res</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">need</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">magicPower</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="n">magicBond</span><span class="p">;</span>
<span class="n">map</span><span class="o">&lt;</span><span class="n">Int</span><span class="p">,</span> <span class="kt">int</span><span class="o">&gt;</span> <span class="n">memo</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">get</span><span class="p">(</span><span class="n">Int</span> <span class="n">mask</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">memo</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">mask</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">memo</span><span class="p">[</span><span class="n">mask</span><span class="p">];</span>
  <span class="kt">int</span> <span class="o">&amp;</span><span class="n">res</span> <span class="o">=</span> <span class="n">memo</span><span class="p">[</span><span class="n">mask</span><span class="p">];</span>
  <span class="n">res</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">bitcount</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">need</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>

  <span class="kt">int</span> <span class="n">badA</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">badB</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">))</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">j</span><span class="p">))</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">magicBond</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="sc">&#39;N&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">badA</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="n">badB</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">badA</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">mask</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">))</span>
        <span class="n">res</span> <span class="o">+=</span> <span class="n">magicPower</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">res</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">get</span><span class="p">(</span><span class="n">mask</span> <span class="o">^</span> <span class="p">(</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">badA</span><span class="p">)),</span> <span class="n">get</span><span class="p">(</span><span class="n">mask</span> <span class="o">^</span> <span class="p">(</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">badB</span><span class="p">)));</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">MagicMolecule</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="kt">int</span> <span class="n">maxMagicPower</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">magicPower</span><span class="p">,</span> <span class="n">vector</span> <span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">magicBond</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">::</span><span class="n">magicBond</span> <span class="o">=</span> <span class="n">magicBond</span><span class="p">;</span>
    <span class="o">::</span><span class="n">magicPower</span> <span class="o">=</span> <span class="n">magicPower</span><span class="p">;</span>


    <span class="n">res</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">magicPower</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(;</span> <span class="n">need</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n</span><span class="p">;</span> <span class="n">need</span><span class="o">++</span><span class="p">);</span>

    <span class="k">return</span> <span class="nf">get</span><span class="p">((</span><span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="n">n</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
  </div>
  <div class="article_meta">
    <p>Category: <a href="http://devblog.me/category/misc.html">misc</a></p>
  </div>


</article>

    <footer>
<p><a href="http://devblog.me/" class="button_accent">&larr; Back to Index</a></p>
<script language="javascript">
    function toggleComments() {
        var commentDiv = document.getElementById("article_comments");
        (commentDiv.style.display == "none") ? commentDiv.style.display = "block" : commentDiv.style.display = "none";
        return false;
    }
</script>
    </footer>

    <div id="ending_message">
      <p>&copy; Slava Kim. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/giulivo/pelican-svbhack" target="_blank">github</a>. .</p>
    </div>
  </main>
</body>
</html>